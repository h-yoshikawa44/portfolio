---
id: git-cli-basic
title: Git - 基本操作コマンド
sidebar_label: 基本操作コマンド
description: Gitの基本操作（作業内容アップ、取り込み）コマンドまとめ
keywords:
  - Git
  - diff
  - status
  - add
  - restore
  - reset
  - commit
  - push
  - fetch
  - merge
  - rebase
  - pull
  - log
---

- 検証バージョン：git version 2.25.0.windows.1

## ファイル変更内容の確認
```bash
$ git diff ファイル名

$ git diff --staged ファイル名 # git addした部分の差分を表示
```
変更前のコードは`-`がつき赤で表示される。  
変更後のコードは`+`がつき緑で表示される。

## ファイルの変更状況やステージングの状態確認
```bash
$ git status
```
ステージングにないものは赤で、あるものは緑で表示される。

## 自分の作業内容をアップする
### ファイルをステージングにアップ
ファイル名にはワイルドカードなども指定可能。
```bash
$ git add ファイルパス
```

### ステージングのアップの取り消し
```bash
$ git restore --staged ステージングのファイル名

$ git reset ステージングのファイル名
```

### コミット
コミットすることでローカルリポジトリに記録される。

#### ステージングにあるファイルをコミット
```bash
$ git commit -m "コミットメッセージ" # コミットメッセージも指定してコミット
```

#### 直前のコミットの修正
```bash
$ git commit --amend # 直前のコミットを取り消す
$ git commit --amend -m "修正コミットメッセージ" # 直前のコミットのコミットメッセージを修正
```

#### コミットの取り消し
```bash
$ git reset --soft HEAD^ # 直前のコミットの取り消し（ワークツリーのファイル状態には影響しない）

$ git reset --hard HEAD^ # 直前のコミットの取り消し（ワークツリーのファイル状態を前のコミットの状態に戻す）
```

### push
#### ローカルリポジトリの記録をリモートリポジトリにアップ
push することで、ローカルリポジトリにコミットされた内容がリモートリポジトリに反映される。  
リモート名のデフォルトは`origin`。
```bash
$ git push リモート名 ブランチ名
```

#### 強制的に上書きするpush
一度 push したコミットを変更して再度 push すると、変更履歴の違いから通常はエラーになる。そのエラーを無視して上書きする push をしたい時に使用する。
**不用意に使わないことを推奨。**
```bash
$ git push -f リモート名 ブランチ名
```

## 他の人の作業内容や他ブランチの履歴情報を取り込む
### リモートリポジトリの履歴情報を取得
```bash
$ git fetch リモート名 # リモートリポジトリの履歴情報を取得
$ git fetch リモート名 ブランチ名 # 指定ブランチの履歴情報のみ取得
```

### 他のブランチの履歴情報を結合
指定したブランチを現在のブランチに結合する。  
こちらではマージコミットが作成される。
```bash
$ git merge ブランチ名
```

### 他のブランチの履歴情報を取り込み履歴情報を書き換える
指定したブランチを現在のブランチに取り込む。  
取り込んだブランチのコミットが自ブランチのコミットの親コミットになるイメージ。
`git merge`と違い、こちらではマージコミットは作成されない。
```bash
$ git rebase ブランチ名
```

### リモートリポジトリの履歴情報を取得 + 結合
`--rebase`オプションをつけることで`git rebase`方式にできるが、設定の`pull.rebase`を true にすることで、デフォルトをリベース方式にすることも可能。
```bash
$ git pull リモート名 ブランチ名 # git fetch + git merge となりマージコミットが作成される

$ git pull --rebase リモート名 ブランチ名 # git fetch + git rebase となりマージコミットが作成されない
```

## コミット履歴の確認
```bash
$ git log
```