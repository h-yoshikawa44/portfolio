---
id: web-configration-style
title: Web - REST を構成するスタイル
sidebar_label: REST を構成するスタイル
description: RESTを構成するアーキテクチャスタイルそれぞれの概要まとめ
keywords:
  - Web
  - REST
---

## 複合アーキテクチャスタイル
REST は複数のアーキテクチャスタイルを組み合わせて構築されている、複合アーキテクチャスタイルである。

### クライアント / サーバ
Web は HTTP というプロトコルでクライアントとサーバが通信する、クライアント / サーバのアーキテクチャスタイルを採用している。  
このスタイルの利点は、単一コンピュータ上で集中処理をするのでなく、クライアントとサーバに分散して処理できること。  
このため、クライアントをマルチプラットフォームにすることが可能になっている。

また、クライアントがユーザインタフェースを提供するため、サーバはデータストレージとしての機能だけを提供すればよくなる。  
それに加えて、複数のサーバを組み合わせることで冗長化し、可用性を上げることができる。

### ステートレスサーバ
ここでのステートレスとは、クライアントのアプリケーション状態をサーバで管理しないことを意味する。  
利点としては、サーバ側の実装を簡略できること。簡略な実装のサーバは、クライアントからのリクエストにレスポンスを返した後すぐにサーバのリソースを開放できる。

しかし、現実にはステートレス出ない Web サービスや Web API も存在する。  
その代表格として、HTTP をステートフルにする Cookie を使ったセッション管理。  
REST の視点から見れば間違った拡張ではあるが、これが必要になる場面もあり、それぞれの利点と欠点を十分理解したうえで必要最低限に利用するとよい。

このステートレス性を導入すると、アーキテクチャスタイルは「クライアント / ステートレスサーバ」になる。

### キャッシュ
キャッシュとは、リソースの有効期限に基づいて一度取得したリソースを保持し、クライアント側で使いまわす方式。  
利点としては、サーバとクライアント間の通信を減らすことで、ネットワーク帯域の利用や処理時間を縮小できること。  
ただ、場合によって古いキャッシュが残り、正確な情報が得られなくなってしまうこともある。

キャッシュを追加したアーキテクチャスタイルは「クライアント / キャッシュ / ステートレスサーバ」となる。

### 統一インタフェース
統一インタフェースとは、URI で指示したリソースに対する操作を統一したインタフェースで行うアーキテクチャスタイルのこと。  
例として、HTTP 1.1 では GET や POST といった8個のメソッドのみ定義されており、これ以上増えることは通常ない。

限定されることは一見厳しい制約のようであるが、制限があることで複雑化を防ぎ、全体のアーキテクチャをシンプルにできる。  
また、インタフェースを統一することで、クライアントとサーバの実装の独立性を向上させる。

統一インタフェースを追加したアーキテクチャスタイルは「統一 / クライアント / キャッシュ / ステートレスサーバ」となる。

### 階層化システム
統一インタフェースの利点の1つとして、システム全体を階層化しやすいというものがある。  
例として、サーバとクライアントの間にロードバランサ（ Load Balancer ）を設置して負荷分散をしたり、プロキシ（ Proxy ）を設置してアクセスを制限するなど。  
サーバとプロキシどちらも同じインタフェースであるため、クライアントから接続する際にその違いを意識する必要がない。

もし基幹系のレガシーシステムなどで HTTP のインタフェースが実装されていないシステムでも、そのシステムの前に Web アプリケーションサーバを挟んで HTTP のインタフェースを持たせることで、クライアントから接続できるようにできる。

こういったシステムをいくつかの階層に分離するアーキテクチャスタイルは「階層化システム（ Layered System ）」と呼ばれる。
この階層化システムを追加したアーキテクチャスタイルを「統一 / 階層化 / クライアント / キャッシュ / ステートレスサーバ」と呼ぶ。

### コードオンデマンド
コードオンデマンドとは、プログラムコードをサーバからダウンロードし、クライアント側でそれを実行するアーキテクチャスタイルのこと。  
例として、JavaScirpt や Flash、Java アプレットなど。

利点としては、クライアントを後から拡張できること。クライアントプログラムに対して、事前に用意した機能だけなく新しい機能を追加していくことができる。  
欠点としては、ネットワーク通信におけるプロトコルの可視性が低下すること。通常、HTTP というプロトコルに従って通信している間は、通信の意味やアクセスするリソースが明白であるが、拡張される影響でそれが不明瞭になる。

コードオンデマンドは、Fielding 氏の博士論文ではオプション扱いの存在だった。  
しかし、近年の Web では JavaScript は広く使われており、重要度が増している。  
（ Flash については、JavaScript で同様のことができることや脆弱性の問題を抱えていたため、2020年内に終了する模様）

コードオンデマンドを追加したアーキテクチャスタイルを「統一 / 階層化 / コードオンデマンド / クライアント / キャッシュ / ステートレスサーバ」と呼ぶ。

## REST = ULCODC$SS
クライアント / サーバにコードオンデマンドまでを追加した複合アーキテクチャスタイルは`ULCODC$SS`という名前である。  
そして Fielding 氏はこのアーキテクチャスタイルに REST と名付けた。

つまり、REST とは6つのアーキテクチャスタイルを組み合わせた複合アーキテクチャスタイルである。
- クライアント / サーバ：ユーザインタフェースと処理を分離する
- ステートレスサーバ：サーバ側でアプリケーション状態を持たない
- キャッシュ：クライアントとサーバの通信回数と量を減らす
- 統一インタフェース：インタフェースを固定する
- 階層化システム：システムを階層に分離する
- コードオンデマンド：プログラムをクライアントにダウンロードして実行する

REST はあくまでアーキテクチャスタイルであるため、実際にシステムを設計する際はそのシステムのアーキテクチャを作る必要がある。  
REST に基づくアーキテクチャを構築するにあたって、一部のスタイルを除外しても構わないが、ほとんどのスタイルを除外するような場合は無理に REST を採用する必要はない。他の適したアーキテクチャスタイルがあれば、そちらを使えばいい。

Web は REST という分散ネットワークシステムのための理論があったからこそ、ここまで発展したとも言える。  
Web サービスや Web API は Web を構成するものの一部。それらを RESTful１（ REST に規約に従い REST らしくあること） にすることで、Web は全体としてより良くなっていく。